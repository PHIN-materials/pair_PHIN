units		metal
atom_style	atomic
newton off
thermo 1

#read_data structure.data
lattice     diamond 5.431
region      box block 0 $L 0 $L 0 $L
create_box  1 box
create_atoms    1 box
displace_atoms all random 0.1 0.1 0.1 142857 units box
mass            1 28
write_data si_$L.data


pair_style	nequip
pair_coeff * * potential.pth Si
mass            1 28

velocity	all create 1000.0 376847 loop geom

neighbor	1.0 bin
neigh_modify    delay 5 every 1

fix		1 all nve

timestep	0.001

compute polarization all nequip best_deployed.pth polarization 3 Si

thermo_style custom step time temp pe etotal press c_polarization[*]

run 0
write_dump all custom $L.dump id type x y z fx fy fz modify sort id
